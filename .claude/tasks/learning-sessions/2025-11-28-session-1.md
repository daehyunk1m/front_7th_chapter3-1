# 학습 세션 로그

## 세션 정보
| 항목 | 내용 |
|------|------|
| 날짜 | 2025-11-28 |
| 세션 번호 | 1 |
| 학습 주제 | FormTextarea, Modal, Alert, Card 컴포넌트 마이그레이션 |
| 진행 상태 | 완료 |

---

## 오늘의 학습 목표
- [x] FormTextarea 마이그레이션 (shadcn/ui Textarea)
- [x] Modal 마이그레이션 (shadcn/ui Dialog)
- [x] Alert 마이그레이션 (Tailwind + Lucide icons)
- [x] Card 마이그레이션 (shadcn/ui Card + CVA)
- [x] _legacy 폴더 정리

---

## Q&A 기록

### Q1: Modal - shadcn/ui Dialog 구조 매칭 어려움
**질문**: Dialog의 compound component 패턴이 기존 `isOpen/onClose` API와 맞지 않음

**답변**:
- Dialog의 `open`과 `onOpenChange` prop을 활용하면 기존 API 유지 가능
- `<Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>`
- `DialogTrigger` 없이 **외부에서 제어**하는 패턴

### Q2: Modal - DialogHeader 레이아웃 문제
**질문**: 제목과 닫기 버튼이 세로로 배치됨 (Before와 다름)

**답변**:
- **원인**: DialogHeader 기본 스타일이 `flex flex-col`
- **해결**: `flex flex-row` 추가로 가로 배치 변경
```tsx
<DialogHeader className='... flex flex-row justify-between items-center'>
```

### Q3: Modal - 기본 스타일 충돌
**질문**: DialogContent에 기본 padding, gap, border가 있어서 스타일 충돌

**답변**:
- **해결**: 기본 스타일 리셋 클래스 추가
```tsx
className={cn("p-0 gap-0 border-none", /* 커스텀 스타일 */)}
```
- `showCloseButton={false}`로 기본 닫기 버튼 숨기기

### Q4: Card - CVA 패턴 적용
**질문**: variant(bordered, elevated, flat)를 CVA로 관리하고 싶음

**답변**:
- shadcn/ui Card를 래핑하고 CVA로 variant 정의
```tsx
const cardVariants = cva("base-styles", {
  variants: {
    variant: {
      default: "...",
      bordered: "...",
      elevated: "...",
      flat: "...",
    }
  }
});
```

---

## 학습한 개념

### 1. shadcn/ui 컴포넌트 래핑 패턴
- 기존 API를 유지하면서 shadcn/ui 컴포넌트 활용
- compound component를 단일 prop 기반으로 래핑
- 기본 스타일 리셋 후 커스텀 스타일 적용

### 2. Dialog 외부 제어 패턴
```tsx
// DialogTrigger 없이 외부에서 open 상태 제어
<Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>
  <DialogContent>...</DialogContent>
</Dialog>
```

### 3. CVA (Class Variance Authority) 활용
- variant별 스타일을 타입 안전하게 관리
- `cva()` 함수로 base 스타일 + variants 정의
- `cardVariants({ variant })` 호출로 클래스 생성

### 4. shadcn/ui 기본 스타일 오버라이드
- `p-0`, `gap-0`, `border-none` 등으로 리셋
- `showCloseButton={false}` 같은 prop 활용
- `aria-describedby={undefined}`로 접근성 경고 해결

---

## 주요 코드 변경

### 새로 생성된 파일
| 파일 | 설명 |
|------|------|
| `components/ui/textarea.tsx` | shadcn/ui Textarea (순수 UI) |
| `components/ui/dialog.tsx` | shadcn/ui Dialog (순수 UI) |
| `components/ui/alert.tsx` | shadcn/ui Alert (순수 UI, 미사용) |
| `components/ui/card.tsx` | shadcn/ui Card (순수 UI) |
| `components/forms/FormTextarea.tsx` | Textarea 래핑 (label, error 표시) |
| `components/modal/Modal.tsx` | Dialog 래핑 (기존 API 유지) |
| `components/alert/Alert.tsx` | Tailwind + Lucide (직접 구현) |
| `components/card/Card.tsx` | Card 래핑 + CVA (variant 지원) |

### 삭제된 파일 (레거시 정리)
| 파일 | 설명 |
|------|------|
| `_legacy/molecules/FormTextarea.tsx` | 삭제됨 |
| `_legacy/molecules/index.ts` | 삭제됨 |
| `_legacy/organisms/Modal.tsx` | 삭제됨 |
| `_legacy/organisms/Alert.tsx` | 삭제됨 |
| `_legacy/organisms/Card.tsx` | 삭제됨 |
| `_legacy/organisms/index.ts` | 삭제됨 |

---

## 해결한 문제들

### 1. Modal 헤더 레이아웃 불일치
- **문제**: DialogHeader 기본 `flex-col`로 세로 배치
- **해결**: `flex flex-row` 추가

### 2. DialogContent 기본 스타일 충돌
- **문제**: `p-6`, `gap-4`, `border` 기본값
- **해결**: `p-0 gap-0 border-none`으로 리셋

### 3. 접근성 경고
- **문제**: DialogTitle, Description 누락 경고
- **해결**: `<DialogTitle>` 사용, `aria-describedby={undefined}` 추가

### 4. Alert 닫기 버튼 세미콜론
- **문제**: `<XIcon />;` 세미콜론이 화면에 표시
- **해결**: 세미콜론 제거

---

## PR/회고용 노트

### 잘한 점
- shadcn/ui 컴포넌트를 기존 API와 호환되게 래핑
- CVA로 variant 패턴 적용 (Card)
- 레거시 폴더 완전 정리

### 개선할 점
- Alert도 CVA 패턴으로 통일할 수 있음
- shadcn/ui 기본 스타일 활용도를 높일 수 있음

### 학습 인사이트
- "shadcn/ui는 복사해서 사용하는 방식이므로 필요에 맞게 수정 가능"
- "compound component를 래핑하면 기존 API 유지하면서 라이브러리 활용 가능"
- "기본 스타일 리셋 후 커스텀 스타일 적용이 충돌 해결의 핵심"

---

## 커밋 예정 변경사항

| 상태 | 파일 |
|------|------|
| 신규 | `components/forms/FormTextarea.tsx` |
| 신규 | `components/modal/Modal.tsx` |
| 신규 | `components/alert/Alert.tsx` |
| 신규 | `components/card/Card.tsx` |
| 신규 | `components/ui/textarea.tsx` |
| 신규 | `components/ui/dialog.tsx` |
| 신규 | `components/ui/alert.tsx` |
| 신규 | `components/ui/card.tsx` |
| 삭제 | `_legacy/molecules/*` |
| 삭제 | `_legacy/organisms/*` |
| 수정 | `pages/ManagementPage.tsx` (import 경로 변경) |

---

## 다음 세션 계획

### 마이그레이션 완료!
모든 레거시 컴포넌트가 마이그레이션 됨:
- atoms: Button, Badge ✅
- molecules: FormInput, FormSelect, FormCheckbox, FormTextarea ✅
- organisms: Header, Table, Modal, Alert, Card ✅

### 다음 작업 제안
1. **Storybook 작성** - 각 컴포넌트 문서화
2. **테스트 보강** - 새 컴포넌트 단위 테스트
3. **디자인 토큰 정리** - CSS 변수 체계화
4. **다크모드 검증** - 모든 컴포넌트 다크모드 확인
