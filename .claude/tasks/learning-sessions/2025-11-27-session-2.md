# 학습 세션 로그

## 세션 정보
| 항목 | 내용 |
|------|------|
| 날짜 | 2025-11-27 |
| 세션 번호 | 2 |
| 학습 주제 | FormSelect 마이그레이션 (shadcn/ui NativeSelect 적용) |
| 진행 상태 | 완료 |

---

## 오늘의 학습 목표
- [x] FormSelect 레거시 분석
- [x] shadcn/ui NativeSelect 설치 및 적용
- [x] 테스트 통과 확인
- [x] 레이아웃 문제 수정

---

## Q&A 기록

### Q1: FormSelect에 관심사 분리가 필요한가?
**질문**: FormInput처럼 비즈니스 로직 분리가 필요할까?

**답변**:
- 현재 FormSelect는 이미 **비즈니스 로직이 없는 상태**
- `error`는 외부에서 주입받음
- `entityType`, `fieldType` 같은 비즈니스 props 없음
- → 관심사 분리보다는 **shadcn/ui 마이그레이션**에 집중

### Q2: shadcn/ui Select vs NativeSelect 선택
**질문**: 왜 NativeSelect를 사용해야 하나?

**답변**:
- 테스트 코드가 `document.querySelector('select[name="role"]')`로 네이티브 `<select>` 태그를 찾음
- Radix UI 기반 Select는 `<button>`, `<div>` 기반 (portal 렌더링)
- NativeSelect는 실제 `<select>`, `<option>` 태그 렌더링 → 테스트 통과

| 컴포넌트 | 렌더링되는 DOM |
|---------|---------------|
| Radix Select | `<button>`, `<div>` 기반 (portal) |
| Native Select | `<select>`, `<option>` 태그 그대로 |

### Q3: NativeSelect 레이아웃 문제
**질문**: Select 너비가 content에 맞춰져서 좁아지는 문제

**답변**:
- **원인**: `native-select.tsx`의 wrapper div에 `w-fit` 클래스 적용
- **해결**: `w-fit` → `w-full`로 변경

---

## 학습한 개념

### 1. shadcn/ui NativeSelect 구조
```tsx
// 설치
npx shadcn@latest add native-select

// 사용
<NativeSelect>
  <NativeSelectOption value="">Select status</NativeSelectOption>
  <NativeSelectOption value="todo">Todo</NativeSelectOption>
</NativeSelect>
```

### 2. 테스트와 컴포넌트 선택의 관계
- 테스트 방식이 컴포넌트 선택에 영향을 줌
- `querySelector('select')` → 네이티브 select 필요
- Testing Library의 `getByRole('combobox')` → Radix Select도 가능

### 3. shadcn/ui 컴포넌트 커스터마이징
- shadcn/ui 컴포넌트는 **복사해서 사용**하는 방식
- 프로젝트 요구사항에 맞게 수정 가능 (`w-fit` → `w-full`)

---

## 주요 코드 변경

### 새로 생성된 파일
| 파일 | 설명 |
|------|------|
| `components/ui/native-select.tsx` | shadcn/ui NativeSelect (순수 UI) |
| `components/forms/FormSelect.tsx` | NativeSelect 래핑 (label, error 표시) |

### 수정된 파일
| 파일 | 변경 내용 |
|------|------|
| `components/ui/native-select.tsx` | wrapper div `w-fit` → `w-full` |

---

## 해결한 문제들

### 1. Select 너비 문제
- **문제**: NativeSelect wrapper에 `w-fit`이 적용되어 content 너비로 줄어듦
- **해결**: `w-full`로 변경하여 부모 너비 100% 차지

---

## PR/회고용 노트

### 잘한 점
- 테스트 코드를 먼저 확인하여 적절한 컴포넌트 선택 (NativeSelect)
- shadcn/ui 컴포넌트의 기본 스타일 문제를 빠르게 파악하고 수정

### 개선할 점
- FormSelect도 FormInput처럼 3레이어 구조로 분리할 수 있음 (NativeSelect → FormSelect → Page)
- 현재는 options prop으로 배열 전달, children 패턴으로 변경 고려 가능

### 학습 인사이트
- "테스트 방식이 컴포넌트 아키텍처 결정에 영향을 줄 수 있다"
- shadcn/ui는 복사해서 사용하므로 프로젝트에 맞게 커스터마이징 가능

---

## 다음 세션 계획

### 우선순위 높음
1. **Modal 컴포넌트 마이그레이션**
   - shadcn/ui Dialog 활용
   - Radix UI 접근성 기능 활용

### 우선순위 중간
2. **Alert 컴포넌트 마이그레이션**

3. **FormTextarea 마이그레이션**

### 참고사항
- `_legacy` 폴더의 Modal, Alert, FormTextarea가 아직 사용 중
- Header, FormCheckbox는 이번 세션 이전에 마이그레이션 완료됨
